import tweepy
import requests

# Twitter API credentials
API_KEY = 'your_api_key'
API_KEY_SECRET = 'your_api_key_secret'
ACCESS_TOKEN = 'your_access_token'
ACCESS_TOKEN_SECRET = 'your_access_token_secret'

# Discord webhook URL
DISCORD_WEBHOOK_URL = 'your_discord_webhook_url'

# Set up Twitter API authentication
auth = tweepy.OAuth1UserHandler(API_KEY, API_KEY_SECRET, ACCESS_TOKEN, ACCESS_TOKEN_SECRET)
api = tweepy.API(auth)

# Create a stream listener
class MyStreamListener(tweepy.StreamListener):
    def on_status(self, status):
        # Prepare the message
        message = f"New tweet from @{status.user.screen_name}: {status.text}"
        print(message)  # Print to console for debugging

        # Send the message to Discord
        requests.post(DISCORD_WEBHOOK_URL, json={"content": message})

    def on_error(self, status_code):
        if status_code == 420:
            return False  # Disconnects the stream on rate limiting

# Create and start the stream
myStreamListener = MyStreamListener()
myStream = tweepy.Stream(auth=api.auth, listener=myStreamListener)

# Filter the stream for specific keywords or user IDs (e.g., follow a specific user)
myStream.filter(follow=['user_id_to_follow'], is_async=True)  # Use the numeric ID of the user

